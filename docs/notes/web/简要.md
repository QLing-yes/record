# BOM DOM

DOM å®šä¹‰äº†æ‰€æœ‰å…ƒç´ çš„*å¯¹è±¡*å’Œ*å±æ€§*ï¼Œä»¥åŠè®¿é—®å®ƒä»¬çš„*æ–¹æ³•*

BOM æµè§ˆå™¨å¯¹è±¡æ¨¡å‹

# äº‹ä»¶

```js
let myEvent = new CustomEvent("pingan", { detail: { name: i } });

addEventListener("pingan", function)//æ·»åŠ 
removeEventListener(event, function);//ç§»é™¤
window.dispatchEvent(myEvent);//ä¸»åŠ¨è§¦å‘

(event.cancelBubble||window.event) = true;//å–æ¶ˆå†’æ³¡
event.preventDefault();//é˜»æ­¢é»˜è®¤äº‹ä»¶
```

- äº‹ä»¶çš„å†’æ³¡(Bubble) æ•è·é˜¶æ®µ(å¤–è‡³å†…)-->ç›®æ ‡é˜¶æ®µ-->è§¦å‘é˜¶æ®µ(å†…è‡³å¤–)

## ç¤ºä¾‹

```js
//ä¸€ä¸ªè¡¨å•å¤„ç†
const form = document.forms[0];
form.addEventListener("submit", function (event) {
    event.stopPropagation();//å–æ¶ˆäº‹ä»¶ä¼ æ’­
    event.preventDefault();//å–æ¶ˆé»˜è®¤äº‹ä»¶
    const formData = new FormData(this);
    for (const formElement of formData) { console.log(formElement); }
})
```

# å…¶ä»–

## é‡å†™å¯¹è±¡

- æ·»åŠ æˆ–é‡å†™å¯¹è±¡ `String.prototype.hump = ()=>{<this>}`

## é€šä¿¡

`postMessage`

- [å‚æ•°](https://www.runoob.com/js/met-win-postmessage.html)

```javascript
//ç›‘å¬æ¥æ”¶ //iframeæ ‡ç­¾å…ƒç´ ç¤ºä¾‹:
window.addEventListener('message', function (event) {
    console.log(event.data);
    //æ”¶åˆ°çš„ = true - è¡¨ç¤ºå¯ä»¥å‘é€äº†
    if (event.data == true) {
        //å‘é€
        iframe.contentWindow.postMessage(Name[i], '*');
    }
})
```

```javascript
//ç›‘å¬ä¿¡æ¯
window.addEventListener('message', function (event) {
    console.log(event.data);
})
//å‘é€ - è¡¨ç¤ºè¿™ä¸ªé¡µé¢åŠ è½½å®Œæˆ
window.parent.postMessage(true, '*');
```

> `<parent>`.addEventListener('message', function){}
> `<parent>`.postMessage(message, targetOrigin, [transfer]); [ğŸ”—](https://www.runoob.com/js/met-win-postmessage.html)

## `å­˜å‚¨`

- `sessionStorage` â€“ ç”¨äºä¸´æ—¶ä¿å­˜åŒä¸€çª—å£(æˆ–æ ‡ç­¾é¡µ)çš„æ•°æ®.  - ä¸localStorageç”¨æ³•ä¸€æ ·

  ```javascript
  ä¿å­˜æ•°æ®ï¼šlocalStorage.setItem(key,value);
  è¯»å–æ•°æ®ï¼šlocalStorage.getItem(key);
  åˆ é™¤å•ä¸ªæ•°æ®ï¼šlocalStorage.removeItem(key);
  åˆ é™¤æ‰€æœ‰æ•°æ®ï¼šlocalStorage.clear();
  å¾—åˆ°æŸä¸ªç´¢å¼•çš„keyï¼šlocalStorage.key(index);
  //ç›‘å¬
  window.addEventListener('storage', () => {});
  window.onstorage = () => {};
  ```

  

## [âœ¨å¾®ä»»åŠ¡](https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide)

ä¸vueçš„"nextTick"ç±»ä¼¼

- queueMicrotask(func);

  1. å¯ç¡®ä¿ä»»åŠ¡é¡ºåºçš„ä¸€è‡´æ€§
  2. å½“å‰å®ä»»åŠ¡ä¹‹åæ‰§è¡Œ

- setImmediate(func); - node

  > é¡ºåº: process.nextTick > setTimeout > setImmediate

<details>
  <summary>å¾®ä»»åŠ¡é˜Ÿåˆ—ä»‹ç»</summary>
å¾®ä»»åŠ¡é˜Ÿåˆ—å·²ç»å­˜åœ¨æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†ä¹‹å‰å®ƒä»…ä»…è¢«å†…éƒ¨ä½¿ç”¨æ¥é©±åŠ¨è¯¸å¦‚ promise è¿™äº›ã€‚
queueMicrotask()çš„åŠ å…¥å¯ä»¥è®©å¼€å‘è€…åˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä»»ä½•æ—¶å€™å³ä¾¿æ˜¯å½“ JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­æ²¡æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡å‰©ä½™æ—¶ä¹Ÿå¯ä»¥å°†ä»£ç å®‰æ’åœ¨ä¸€ä¸ªå®‰å…¨çš„æ—¶é—´è¿è¡Œã€‚ åœ¨å¤šä¸ªå®ä¾‹ã€æ‰€æœ‰æµè§ˆå™¨ä»¥åŠè¿è¡Œæ—¶ä¸­ï¼Œä¸€ä¸ªæ ‡å‡†çš„å¾®ä»»åŠ¡é˜Ÿåˆ—æœºéƒ½åˆ¶æ„å‘³ç€è¿™äº›å¾®ä»»åŠ¡å¯ä»¥éå¸¸å¯é çš„ä»¥ç›¸åŒçš„é¡ºåºæ‰§è¡Œï¼Œä»è€Œé¿å…ä¸€äº›æ½œåœ¨çš„éš¾ä»¥å‘ç°çš„é”™è¯¯ã€‚
    <br>
    <a>https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth</a>
</details>


>  [`Window`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window)æˆ– [`Worker`](https://developer.mozilla.org/zh-CN/docs/Web/API/Worker) æ¥å£çš„ `**queueMicrotask()**` æ–¹æ³•,
>  å®ƒå°†åœ¨å½“å‰ä»»åŠ¡ï¼ˆtaskï¼‰å®Œæˆå…¶å·¥ä½œä¹‹åè¿è¡Œï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ§åˆ¶è¿”å›åˆ°æµè§ˆå™¨çš„äº‹

> å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰çš„æ‰§è¡Œé¡ºåºåœ¨æ‰€æœ‰æŒ‚èµ·çš„ä»»åŠ¡ï¼ˆpending tasksï¼‰å®Œæˆä¹‹åï¼Œåœ¨å¯¹æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯äº§ç”Ÿæ§åˆ¶ï¼ˆyielding control to the browser's event loopï¼‰ä¹‹å‰ã€‚

> **å…¥åˆ—ä¸€ä¸ªå¾®ä»»åŠ¡åï¼Œä¼šå¼•èµ·å…¶å›è°ƒå‡½æ•°åœ¨é¡¶å±‚è„šæœ¬å®Œæ¯•åè¿è¡Œ**ã€‚

> **ä¸»ç¨‹åºæ‰§è¡Œé¡ºåº: Promise <--> queueMicrotask -> setTimeout**
>
> åŒæ­¥ -> å¼‚æ­¥ï¼ˆå¾®ä»»åŠ¡ï¼‰ -> å¼‚æ­¥ï¼ˆå®ä»»åŠ¡ï¼‰

> `æ ˆä¸Šä¸ºç©ºçš„æ—¶åˆ»æ‰§è¡Œ` !!!! å…·æœ‰ä½œç”¨åŸŸå…³ç³»

> å‡å°‘æ“ä½œä¸­å¯æ„ŸçŸ¥åˆ°çš„å»¶è¿Ÿè€Œå¸¦æ¥çš„é£é™©

## [Web Workers API](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API)

> ä¸»çº¿ç¨‹å¦èµ·æ–°çš„çº¿ç¨‹æ¥è¿è¡Œè„šæœ¬

- ä¸èƒ½ç›´æ¥åœ¨ worker çº¿ç¨‹ä¸­æ“çºµ DOM å…ƒç´ 
- ä¸èƒ½ä½¿ç”¨[`window`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window) å¯¹è±¡ä¸­çš„`æŸäº›`æ–¹æ³•å’Œå±æ€§
- ä¸»çº¿ç¨‹å’Œ worker çº¿ç¨‹ç›¸äº’ä¹‹é—´ä½¿ç”¨ä¸Šé¢ä»‹ç»çš„é€šä¿¡æ–¹å¼é€šä¿¡(æ ‡é¢˜`é€šä¿¡`)
- éµå®ˆåŒæºç­–ç•¥

```js
//const myWorker = new Worker(aURL, options);
let myWorker = new Worker("worker.js");
first.onchange = function() {
  myWorker.postMessage([first.value,second.value]);
}
```

[Worker()](https://developer.mozilla.org/zh-CN/docs/Web/API/Worker/Worker)

## [dns-prefetch](https://developer.mozilla.org/zh-CN/docs/Web/Performance/dns-prefetch)

é¢„è§£ædnsåŸŸå

## jsæ‡’åŠ è½½

- ç±»å‹ä¸º`type="module"`çš„è„šæœ¬æ ‡ç­¾é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«å»¶è¿Ÿã€‚
- 

# è¿ç®—ç¬¦

## çŸ­è·¯è¿ç®—ç¬¦:

| è¿ç®—ç¬¦   | ç­‰ä»·äº                                |
| -------- | ------------------------------------- |
| a \|\| b | a ? a : b                             |
| a && b   | !a ? a : b                            |
| a ?? b   | a !== undefined && a !== null ? a : b |

## é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦:

| èµ‹å€¼è¿ç®—ç¬¦ | ç­‰ä»·äº                                    |
| ---------- | ----------------------------------------- |
| a \|\|= b  | a = a ? a : b                             |
| a &&= b    | a = !a ? a : b                            |
| a ??= b    | a = a !== undefined && a !== null ? a : b |

## å¤åˆèµ‹å€¼è¿ç®—ç¬¦:

- åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦ï¼š+= , -= , *= , /= , %= , *=
- æŒ‰ä½èµ‹å€¼è¿ç®—ç¬¦ï¼š&= , ^= , |=
- ç§»ä½èµ‹å€¼è¿ç®—ç¬¦ï¼š<<= , >>= , >>>=

## æ“ä½œç¬¦:

- `?.` - å¯é€‰é“¾æ“ä½œç¬¦

  > åˆ¤æ–­**å³ä¾§**å¯¹è±¡æ˜¯å¦å±äº**å·¦ä¾§**  (å¯éªŒè¯å¼•ç”¨æ˜¯å¦æœ‰æ•ˆè€Œä¸æŠ¥é”™)

in & of :

- in

  > ä¾æ¬¡å–**é”®å€¼**
  > `if("key" in obj){console.log(å­˜åœ¨keyå±æ€§);}`

- of [ğŸ”—](https://developer.mozilla.org/zh-CN/docs/orphaned/Web/JavaScript/Reference/Statements/for...of)

  > ä¾æ¬¡å– **å±æ€§** 

# èŠ‚æµ & é˜²æŠ–

## èŠ‚æµ:

é’ˆå¯¹é«˜é¢‘çš„è§¦å‘çš„å‡½æ•°ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæ€è€ƒé€šè¿‡èŠ‚æµæˆ–è€…é˜²æŠ–å»å®ç°æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ã€‚
å®šæ—¶å™¨æœ‰å»¶è¿Ÿçš„èƒ½åŠ›ï¼Œäº‹ä»¶ä¸€å¼€å§‹ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œäº‹ä»¶ç»“æŸåè¿˜ä¼šå†æ‰§è¡Œä¸€æ¬¡ï¼›è€Œæ—¶é—´å·®äº‹ä»¶ä¸€å¼€å§‹å°±ç«‹å³æ‰§è¡Œï¼Œæ—¶é—´ç»“æŸä¹‹åä¹Ÿä¼šç«‹å³åœæ­¢

- `èŠ‚æµå®ç°åŸç†æ˜¯é€šè¿‡ å®šæ—¶å™¨ å’Œ æ—¶é—´å·® åšåˆ¤æ–­.`
- å‡½æ•°èŠ‚æµä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

## é˜²æŠ–:

é˜²æŠ–å®ç°åŸç†æ˜¯é€šè¿‡å®šæ—¶å™¨ï¼Œå¦‚æœåœ¨è§„å®šæ—¶é—´å†…å†æ¬¡è§¦å‘äº‹ä»¶ä¼šå°†ä¸Šæ¬¡çš„å®šæ—¶å™¨æ¸…é™¤ï¼Œå³ä¸ä¼šæ‰§è¡Œå‡½æ•°å¹¶é‡æ–°è®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œç›´åˆ°è¶…è¿‡è§„å®šæ—¶é—´è‡ªåŠ¨è§¦å‘å®šæ—¶å™¨ä¸­çš„å‡½æ•°ã€‚

- ä¾‹å¦‚: `é¢‘ç¹è§¦å‘æ—¶ æ¯æ¬¡éƒ½å–æ¶ˆä¸Šä¸€æ¬¡äº‹ä»¶ åªæ‰§è¡Œæœ€åä¸€æ¬¡çš„äº‹ä»¶.`

# å°¾è°ƒç”¨(tail calls)

- å°¾è°ƒç”¨:æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è¿”å›å¹¶è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°

  > é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚

- å°¾é€’å½’:å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚

## å°¾è°ƒç”¨ä¼˜åŒ–

- æ ¸å¿ƒæ€è·¯: å°¾é€’å½’ä¹‹æ‰€ä»¥éœ€è¦ä¼˜åŒ–ï¼ŒåŸå› æ˜¯è°ƒç”¨æ ˆå¤ªå¤šï¼Œé€ æˆæº¢å‡ºï¼Œé‚£ä¹ˆåªè¦å‡å°‘è°ƒç”¨æ ˆï¼Œå°±ä¸ä¼šæº¢å‡ºã€‚

  æ€ä¹ˆåšå¯ä»¥å‡å°‘è°ƒç”¨æ ˆå‘¢ï¼Ÿå°±æ˜¯é‡‡ç”¨â€œå¾ªç¯â€æ¢æ‰â€œé€’å½’â€ã€‚

[è¹¦åºŠå‡½æ•°](https://es6.ruanyifeng.com/#docs/function#%E5%B0%BE%E9%80%92%E5%BD%92%E4%BC%98%E5%8C%96%E7%9A%84%E5%AE%9E%E7%8E%B0)å¹¶ä¸æ˜¯çœŸæ­£çš„å°¾é€’å½’ä¼˜åŒ–ï¼Œä¸‹é¢çš„å®ç°æ‰æ˜¯ã€‚

##  ä¼˜åŒ–

- å°¾è°ƒç”¨ä¼˜åŒ–

```js
function foo(n){
    foo.num = {n:++n};
    console.log(foo.num);
}
foo(0)
while(foo.num.n < 300000){
    foo(foo.num.n)
}
```

- ç»ˆæä¼˜åŒ–

```js
function foo(n){
    foo.num = {n:++n};
    console.log(foo.num);
    if(foo.num.n < 300000){
        //queueMicrotask åˆ›å»ºæµè§ˆå™¨å¾®ä»»åŠ¡é˜Ÿåˆ—
        //ç›®çš„:å¸¦å…¥å¼‚æ­¥è®©å‡½æ•°å¿«é€Ÿè¿”å›(ç»“æŸè¯¥æ ˆ)
        queueMicrotask(()=>{
            foo(foo.num.n)
        })
    }
}
foo(0)
```



# [æ‰§è¡Œä¸Šä¸‹æ–‡](http://hpoenixf.com/%E4%B8%80%E6%AC%A1%E6%90%9E%E5%AE%9A%E9%97%AD%E5%8C%85%E5%92%8Cthis.html#comments)

1. JavaScript æ€æ ·ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡

   - æ‰§è¡Œæ ˆï¼Œä¹Ÿå°±æ˜¯åœ¨å…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­æ‰€è¯´çš„â€œè°ƒç”¨æ ˆâ€ï¼Œæ˜¯ä¸€ç§æ‹¥æœ‰ LIFOï¼ˆ`åè¿›å…ˆå‡º`ï¼‰æ•°æ®ç»“æ„çš„æ ˆï¼Œè¢«ç”¨æ¥å­˜å‚¨ä»£ç è¿è¡Œæ—¶åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚
   - ç”±äºJSæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸€æ¬¡åªèƒ½å‘ç”Ÿä¸€ä»¶äº‹æƒ…ï¼Œå…¶ä»–äº‹æƒ…ä¼šæ”¾åœ¨æŒ‡å®šä¸Šä¸‹æ–‡æ ˆä¸­æ’é˜Ÿã€‚
     jsè§£é‡Šå™¨åœ¨åˆå§‹åŒ–æ‰§è¡Œä»£ç æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åˆ°æ ˆä¸­ï¼Œæ¥ç€éšç€æ¯æ¬¡å‡½æ•°çš„è°ƒç”¨éƒ½ä¼šåˆ›å»ºå¹¶å‹å…¥ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(å‹å…¥æ ˆçš„é¡¶éƒ¨)ã€‚å‡½æ•°æ‰§è¡Œåï¼Œè¯¥æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å¼¹å‡ºã€‚
   - å¼•æ“ä¼šæ‰§è¡Œé‚£äº›æ‰§è¡Œä¸Šä¸‹æ–‡ä½äºæ ˆé¡¶çš„å‡½æ•°
   - `åè¿›å…ˆå‡º: åè¿›å»çš„è‡ªç„¶åœ¨é¡¶éƒ¨,ä¸€å±‚ä¸€å±‚å¾€ä¸‹æ‰§è¡Œ,æ‰§è¡Œå®Œçš„å¼¹å‡º`

2. åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡

   > **åˆ›å»ºé˜¶æ®µ :**

   - This ç»‘å®š
     1. å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ`this` çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡
     2. å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ`this` çš„å€¼å–å†³äºå‡½æ•°å¦‚ä½•è¢«è°ƒç”¨çš„

   - [åˆ›å»º**è¯æ³•ç¯å¢ƒ**ç»„ä»¶ã€‚](https://juejin.cn/post/6844903682283143181#heading-7)
     ...
   - åˆ›å»º**å˜é‡ç¯å¢ƒ**ç»„ä»¶ã€‚
     ...

   > **æ‰§è¡Œé˜¶æ®µ :**

   - â€‹	å®Œæˆå¯¹æ‰€æœ‰è¿™äº›å˜é‡å’Œå‡½æ•°å¼•ç”¨çš„åˆ†é…ï¼Œæœ€åæ‰§è¡Œä»£ç ã€‚
   - åœ¨æ‰§è¡Œé˜¶æ®µï¼Œå¦‚æœ JavaScript å¼•æ“ä¸èƒ½åœ¨æºç ä¸­å£°æ˜çš„å®é™…ä½ç½®æ‰¾åˆ° `let` å˜é‡çš„å€¼ï¼Œå®ƒä¼šè¢«èµ‹å€¼ä¸º `undefined`ã€‚

3. äº”ä¸ªå…³é”®ç‚¹ï¼š

   1. å•çº¿ç¨‹
   2. åŒæ­¥æ‰§è¡Œ
   3. ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡
   4. æ— é™åˆ¶å‡½æ•°ä¸Šä¸‹æ–‡
   5. æ¯æ¬¡å‡½æ•°è°ƒç”¨åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬è°ƒç”¨è‡ªå·±

4. ä¸Šä¸‹æ–‡

   - **å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡** 
     1. åˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡(æµè§ˆå™¨windows)ï¼Œå¹¶ä¸”è®¾ç½® `this` çš„å€¼ç­‰äºè¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚
        ä¸€ä¸ªç¨‹åºä¸­åªä¼šæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

   - **å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡** 
     1. æ¯å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶, éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ã€‚
     2. 

   - **Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡**

# ä½œç”¨åŸŸé“¾

æ´‹è‘±æ¨¡å‹

> å­å¯¹è±¡ä¼šä¸€çº§ä¸€çº§çš„å‘ä¸ŠæŸ¥æ‰¾çˆ¶å¯¹è±¡çš„å˜é‡ï¼Œçˆ¶å¯¹è±¡çš„å˜é‡å¯¹å­å¯¹è±¡æ˜¯å¯è§çš„ï¼Œåä¹‹ä¸æˆç«‹ã€‚

# é—­åŒ…

å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸä¸å¯ç›´æ¥è¢«å¤–è®¿é—®

```js
//ç¤ºä¾‹
function a() {
	let num = 1
	let b = () => num++;
	return b
}
let c1 = a(), c2 = a();
c1() // 1
c1() // 2
c2() // 1
c2() // 2
```

# æŸ¯ç†åŒ–

- ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹:

  ```js
  function curry(a) {
      return function (b) {
          return a + b
      }
  }
  curry(1)(2);//3
  ```


# ç»„åˆæ„é€ å‡½æ•°å’ŒåŸå‹

```js
Foo.prototype = {
  constructor: Foo,
  sayName: function(){
    console.log(this.name);
  }
}
```

# [åŒæºç­–ç•¥](https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)

- åè®®ç›¸åŒ(http|htps|../)
- åŸŸåç›¸åŒ
- ç«¯å£ç›¸åŒ

## Cookie

- Cookie æ˜¯æœåŠ¡å™¨å†™å…¥æµè§ˆå™¨çš„ä¸€å°æ®µä¿¡æ¯ï¼Œåªæœ‰åŒæºçš„ç½‘é¡µæ‰èƒ½å…±äº«ã€‚

  ä½†æ˜¯ï¼Œä¸¤ä¸ªç½‘é¡µä¸€çº§åŸŸåç›¸åŒï¼Œåªæ˜¯äºŒçº§åŸŸåä¸åŒï¼Œæµè§ˆå™¨å…è®¸é€šè¿‡è®¾ç½®`document.domain`å…±äº« Cookieã€‚

- 

## [è·¨åŸŸè§£å†³](https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)

å¸¸è§:

- JSONP
- WebSocket
- [CORS](https://www.ruanyifeng.com/blog/2016/04/cors.html)

# åŠ å¯†è§£å¯†

- XORè¿ç®—ç¬¦`^`

  ```js
  // ^ //ä¸¤æ•°åŒç±»(1)ç¿»è½¬
   6 = 0110
   2 = 0010
  ---------------------------------------------
  XOR = 0100
  äºŒè¿›åˆ¶ä»£ç  0100 ç­‰äº 4 åè¿›åˆ¶
  //åˆ©ç”¨è¿™ä¸ªç‰¹æ€§å°±å¯ä»¥åŠ è§£å¯†
  28724^88757 = 76417
  76417^88757 = 28724
  ```

- Uint8Array(æ˜¯ä¸€ç§ ç±»å‹åŒ–æ•°ç»„)

  ```js
  var uint8Array = new TextEncoder("utf-8").encode("ä½ å¥½");//è½¬Uint8Array
  /*  è¿™ä¸­é—´å¯¹Uint8Arrayè¿›è¡ŒåŠ å¯† å¦‚ä¸Šé¢çš„XORæˆ–å…¶ä»–è‡ªå®šç®—æ³•  */
  var data = new TextDecoder("utf-8").decode(uint8Array);//è§£ç 
  ```

# çŸ©å½¢é˜µåˆ— æ¸²æŸ“æ–¹å‘

```js
let max_x = 3,max_y = 4
for (let x = 0; x < max_x; x++) {
    for (let y = 0; y < max_y; y++) {
      console.log(y * max_x + x)//åè½¬æ¸²æŸ“( çºµ <-/äº’æ¢/-> æ¨ª )
      console.log(x * grid.y + y)//é¡ºåºæ¸²æŸ“( çºµ -/é¡ºåº/-> çºµ )
    }
}
```

# âœ¨[æ–‡ä»¶](https://developer.mozilla.org/zh-CN/docs/Web/API/File_API/Using_files_from_web_applications)

## [FileReader](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader)

å¼‚æ­¥è½¬æ¢èµ„æº

- [å…·æœ‰:](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9) **äº‹ä»¶, æ–¹æ³•, å±æ€§,**

- ```javascript
  //ç®€å•ç¤ºä¾‹
  const Reader = new FileReader();
  Reader.onerror = (e) => {}
  //è¯»å–æ“ä½œå®Œæˆè§¦å‘
  Reader.onload = (e) => {
      console.log(e.target?.result)//ç»“æœ
  }
  //(è½¬Base64)
  Reader.readAsDataURL(Target:blob)//blob - åˆ—å¦‚inputé€‰æ‹©çš„File
  ```
  
  > äº‹ä»¶åˆ—å¦‚: è¿›åº¦, é”™è¯¯, ä¸­æ­¢, 

## URL

`URL(ç»å¯¹æˆ–ç›¸å¯¹url , åŸºå‡†url)` - åˆ›å»ºæ–°urlåœ°å€

`URL.createObjectURL(object)` - åˆ›å»ºèµ„æºURL

- object: [`File`](https://developer.mozilla.org/zh-CN/docs/Web/API/File)|[`Blob`](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)|[`MediaSource`](https://developer.mozilla.org/zh-CN/docs/Web/API/MediaSource)ã€‚
- è¿”å›`URLString`

`URL.revokeObjectURL(URLString)` - é‡Šæ”¾èµ„æºURL

## input File



# âœ¨[æ‹–æ”¾ API](https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API)

`dragenter` - æ‹–æ”¾

## å¤åˆ¶

```js
navigator.clipboard.writeText(str)
```

